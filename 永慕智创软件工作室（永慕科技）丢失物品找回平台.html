<!DOCTYPE html> 
<html lang="zh-CN"> 
<head> 
 <meta charset="UTF-8"> 
 <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
 <title>å¤±ç‰©æ‰¾å›å¹³å° - æ°¸æ…•æ™ºåˆ›è½¯ä»¶å·¥ä½œå®¤ï¼ˆæ°¸æ…•ç§‘æŠ€ï¼‰</title> 
 <style> 
 * { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
  font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; 
 } 
 
 body { 
  background-color: #f5f5f5; 
  color: #333; 
  line-height: 1.6; 
  padding: 20px; 
  max-width: 800px; 
  margin: 0 auto; 
 } 
 
 .container { 
  background-color: #fff; 
  border-radius: 10px; 
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1); 
  padding: 30px; 
  margin-top: 20px; 
 } 
 
 h1 { 
  color: #1a73e8; 
  text-align: center; 
  margin-bottom: 30px; 
  font-size: 24px; 
 } 
 
 .notice { 
  background-color: #fff8e1; 
  border-left: 4px solid #ffc107; 
  padding: 15px; 
  margin-bottom: 20px; 
  font-size: 14px; 
 } 
 
 .contact-info { 
  margin-bottom: 30px; 
 } 
 
 .contact-item { 
  display: flex; 
  align-items: center; 
  margin-bottom: 15px; 
 } 
 
 .contact-icon { 
  width: 40px; 
  height: 40px; 
  background-color: #1a73e8; 
  border-radius: 50%; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  color: white; 
  margin-right: 15px; 
  font-size: 20px; 
 } 
 
 .contact-detail { 
  flex: 1; 
 } 
 
 .contact-detail h3 { 
  color: #1a73e8; 
  margin-bottom: 5px; 
  font-size: 16px; 
 } 
 
 .contact-detail p { 
  color: #666; 
  font-size: 14px; 
 } 
 
 .warning { 
  background-color: #ffebee; 
  border-left: 4px solid #f44336; 
  padding: 15px; 
  margin-bottom: 20px; 
  font-size: 14px; 
 } 
 
 .footer { 
  text-align: center; 
  margin-top: 30px; 
  font-size: 12px; 
  color: #999; 
 } 
 
 .ip-display { 
  margin-top: 20px; 
  padding: 15px; 
  background-color: #e8f5e9; 
  border-left: 4px solid #4caf50; 
  font-size: 14px; 
 } 
 
 @media (max-width: 600px) { 
  .container { 
   padding: 20px; 
  } 
 
  h1 { 
   font-size: 20px; 
  } 
 } 
 </style> 
</head> 
<body> 
 <div class="container"> 
  <h1>æ°¸æ…•æ™ºåˆ›è½¯ä»¶å·¥ä½œå®¤ï¼ˆæ°¸æ…•ç§‘æŠ€ï¼‰å¤±ç‰©æ‰¾å›å¹³å°</h1> 
 
  <div class="notice"> 
   æ‚¨è¿›å…¥æ­¤ç½‘é¡µè¯´æ˜æ‚¨æ‹¾å–åˆ°å¹¶æ‰«æå¸¦æœ‰ç”±æ°¸æ…•æ™ºåˆ›è½¯ä»¶å·¥ä½œå®¤ï¼ˆæ°¸æ…•ç§‘æŠ€ï¼‰æä¾›å¤±ç‰©æ‰¾å›æœåŠ¡çš„äºŒç»´ç ã€‚<br> 
   è¯¥å¹³å°æä¾›äº†å¤±ä¸»çš„è”ç³»æ–¹å¼ï¼Œæ–¹ä¾¿æ‚¨è”ç³»ï¼Œä¹Ÿä¸ºæ›´å¥½ç¡®å®šæ‚¨çš„ä½ç½®è¿›è€Œæ–¹ä¾¿å¤±ä¸»ä¸»åŠ¨è”ç³»æ‚¨ï¼Œéœ€è·å–æ‚¨çš„IPåœ°å€ã€ä½ç½®ä¿¡æ¯ï¼Œè¯·æ‚‰çŸ¥ï¼<br>
   âš ï¸IPåœ°å€è·å–åå°†ä¼šè‡ªåŠ¨å¼¹çª—ç”³è¯·è·å–ä½ç½®ä¿¡æ¯ï¼Œéº»çƒ¦æ‰‹åŠ¨ç‚¹å‡»å…è®¸ï¼
   ã€è¯·æå‰æ‰“å¼€æ‰‹æœºå®šä½æœåŠ¡å¼€å…³ï¼Œæ ¹æ®ä¸­åäººæ°‘å…±å’Œå›½ç›¸å…³æ³•å¾‹è§„å®šï¼šæ‚¨çš„ä¸ªäººéšç§æ•°æ®å°†åœ¨å¤±ç‰©æ‰¾å›åæ°¸ä¹…åˆ é™¤ï¼Œä¸åšä»»ä½•å¤‡ä»½ã€‚ã€‘ 
  </div> 
 
  <div class="contact-info"> 
   <h2>å¤±ä¸»è”ç³»æ–¹å¼</h2> 
   <div class="contact-item"> 
    <div class="contact-icon">ğŸ“±</div> 
    <div class="contact-detail"> 
     <h3>è”ç³»ç”µè¯</h3> 
     <p>18788430982</p> 
    </div> 
   </div> 
   <div class="contact-item"> 
    <div class="contact-icon">âœ‰ï¸</div> 
    <div class="contact-detail"> 
     <h3>ç”µå­é‚®ç®±</h3> 
     <p>liliuhang1124@outlook.com</p> 
    </div> 
   </div> 
   <div class="contact-item"> 
    <div class="contact-icon">ğŸ’¬</div> 
    <div class="contact-detail"> 
     <h3>ä»£ç†è´Ÿè´£å¾®ä¿¡</h3> 
     <p>ymkj_weixin</p> 
    </div> 
   </div> 
  </div> 
 
  <div class="warning"> 
   <h3>é‡è¦è­¦ç¤º</h3> 
   <p>æ‚¨çš„IPä¸ºï¼š<span id="user-ip">æ­£åœ¨è·å–...</span></p> 
   <p>IPä¿¡æ¯ã€åœ°å€ä¿¡æ¯å°†è¢«è®°å½•ä¸Šä¼ åˆ°ç®¡ç†åå°ï¼Œè¯·åŠæ—¶è”ç³»å¤±ä¸»å½’è¿˜ç‰©å“ã€‚</p> 
   <p>ã€å¦‚æ‚¨åœ¨æ‰«ç è¯†åˆ«è¿›å…¥æ­¤å¹³å°åæœªåŠæ—¶è”ç³»å¤±ä¸»ï¼Œå¤±ä¸»å¯æ ¹æ®ç›¸å…³ä¿¡æ¯è‡³æ‰€åœ¨åœ°å…¬å®‰æœºå…³æŠ¥è­¦ï¼Œç”±æ­¤å¸¦æ¥çš„åæœç”±æ‚¨æ‰¿æ‹…ã€‘</p> 
   <p>æ ¹æ®ä¸­åäººæ°‘å…±å’Œå›½ç›¸å…³æ³•å¾‹è§„å®šï¼šæ‚¨çš„ä¸ªäººéšç§æ•°æ®å°†åœ¨å¤±ç‰©æ‰¾å›åæ°¸ä¹…åˆ é™¤ï¼Œä¸åšä»»ä½•å¤‡ä»½ã€‚</p> 
  </div> 
 
  <div class="ip-display" id="location-info" style="display: none;"> 
   <h3>ä½ç½®ä¿¡æ¯</h3> 
   <p>æ‚¨çš„ä½ç½®ä¿¡æ¯ï¼š<span id="user-location">æ­£åœ¨è·å–ä½ç½®...</span></p> 
   <p>è¯¦ç»†åœ°å€ï¼š<span id="user-address">æ­£åœ¨è·å–è¯¦ç»†åœ°å€...</span></p>
   <p>æˆ‘ä»¬å·²è®°å½•æ­¤ä¿¡æ¯å¹¶é€šçŸ¥å¤±ä¸»ï¼Œçƒ¦è¯·æ‚¨ä¼˜å…ˆé€šè¿‡ä»¥ä¸Šè”ç³»æ–¹å¼è”ç³»å¤±ä¸»ã€‚</p> 
  </div> 
 
  <div class="footer"> 
   å»ºè®¾è¿è¥ï¼šæ°¸æ…•æ™ºåˆ›è½¯ä»¶å·¥ä½œå®¤ï¼ˆæ°¸æ…•ç§‘æŠ€ï¼‰<div>æŠ€æœ¯æ”¯æŒï¼šé«˜å¾·åœ°å›¾ã€é˜¿é‡Œäº‘
  </div> 
 </div> 

<div id="container"></div> 
<script type="text/javascript"> 
 window._AMapSecurityConfig = { 
  securityJsCode: "6655b8ddcef38eb7dcfc6b4ec649cedd", 
 };//å¦‚æ‚¨éæ°¸æ…•æ™ºåˆ›è½¯ä»¶å·¥ä½œå®¤ï¼ˆæ°¸æ…•ç§‘æŠ€ï¼‰å‘˜å·¥ï¼Œä¸¥ç¦æ»¥ç”¨securityJsCodeï¼Œå¦åˆ™å°†è´Ÿæ³•å¾‹è´£ä»»ï¼ 
</script> 
<script 
 type="text/javascript" 
 src="https://webapi.amap.com/maps?v=2.0&key=197ddb697c7ee953ddd1e0472d95b201" 
></script> 
<script type="text/javascript"> 
 var map = new AMap.Map("container", { 
  zoom: 12, 
 }); 
</script> 
 <script> 
 // æ˜¾ç¤ºåˆå§‹å¼¹çª—æç¤º 
 alert("æ‚¨è¿›å…¥æ­¤ç½‘é¡µè¯´æ˜æ‚¨æ‹¾å–åˆ°å¹¶æ‰«æå¸¦æœ‰ç”±æ°¸æ…•æ™ºåˆ›è½¯ä»¶å·¥ä½œå®¤ï¼ˆæ°¸æ…•ç§‘æŠ€ï¼‰æä¾›å¤±ç‰©æ‰¾å›æœåŠ¡çš„äºŒç»´ç ã€‚\nä¸ºæ›´å¥½ç¡®å®šæ‚¨çš„ä½ç½®è¿›è€Œæ–¹ä¾¿å¤±ä¸»è”ç³»æ‚¨ï¼Œéœ€è·å–æ‚¨çš„IPåœ°å€ã€ä½ç½®ä¿¡æ¯ï¼Œè¯·æå‰æ‰“å¼€æ‰‹æœºå®šä½æœåŠ¡å¼€å…³ï¼\nâš ï¸IPåœ°å€è·å–åå°†ä¼šè‡ªåŠ¨å¼¹çª—ç”³è¯·è·å–ä½ç½®ä¿¡æ¯ï¼Œéº»çƒ¦æ‰‹åŠ¨ç‚¹å‡»å…è®¸ï¼\n\nã€æ ¹æ®ä¸­åäººæ°‘å…±å’Œå›½ç›¸å…³æ³•å¾‹è§„å®šï¼šæ‚¨çš„ä¸ªäººéšç§æ•°æ®å°†åœ¨å¤±ç‰©æ‰¾å›åæ°¸ä¹…åˆ é™¤ï¼Œä¸åšä»»ä½•å¤‡ä»½ã€‚ã€‘"); 
 
 // ç¬¬ä¸€æ¬¡ç¡®è®¤å®šä½æœåŠ¡ 
 if (!confirm("ã€ç¬¬ä¸€æ¬¡æé†’ã€‘è¯·ç¡®å®šå·²æ‰“å¼€æ‰‹æœºå®šä½æœåŠ¡ï¼Œç¡®ä¿æ­£ç¡®è·å–æ‰€éœ€ä¿¡æ¯ã€‚\nç¡®è®¤æ‰“å¼€æ‰‹æœºå®šä½æœåŠ¡åå†ç‚¹å‡»ç¡®å®šã€‚")) { 
  alert("è¯·å…ˆå¼€å¯å®šä½æœåŠ¡åå†åˆ·æ–°é¡µé¢é‡è¯•ï¼"); 
  throw new Error("å®šä½æœåŠ¡æœªå¼€å¯"); 
 } 
 
 // ç¬¬äºŒæ¬¡ç¡®è®¤å®šä½æœåŠ¡ 
 if (!confirm("ã€ç¬¬äºŒæ¬¡æé†’ã€‘è¯·å†æ¬¡ç¡®è®¤ï¼šè¯·ç¡®ä¿å·²æ‰“å¼€æ‰‹æœºå®šä½æœåŠ¡ã€‚\nç‚¹å‡»ç¡®å®šç»§ç»­è·å–ä½ç½®ä¿¡æ¯ã€‚\nâš ï¸IPåœ°å€è·å–åå°†ä¼šè‡ªåŠ¨å¼¹çª—ç”³è¯·è·å–ä½ç½®ä¿¡æ¯ï¼Œéº»çƒ¦æ‰‹åŠ¨ç‚¹å‡»å…è®¸ï¼")) { 
  alert("è¯·å…ˆå¼€å¯å®šä½æœåŠ¡åå†åˆ·æ–°é¡µé¢é‡è¯•ï¼"); 
  throw new Error("å®šä½æœåŠ¡æœªç¡®è®¤å¼€å¯"); 
 } 
 
 // è·å–IPåœ°å€ï¼ˆä½¿ç”¨ç¬¬ä¸‰æ–¹APIï¼‰ 
 function getIPAddress(callback) { 
  fetch('https://api.ipify.org?format=json') 
   .then(response => response.json()) 
   .then(data => callback(data.ip)) 
   .catch(error => { 
    console.error('è·å–IPåœ°å€å¤±è´¥:', error); 
    // å¤‡ç”¨IPè·å–API 
    fetch('https://ipapi.co/json/') 
     .then(response => response.json()) 
     .then(data => callback(data.ip)) 
     .catch(error => { 
      console.error('å¤‡ç”¨IPè·å–å¤±è´¥:', error); 
      callback('æ— æ³•è·å–IPåœ°å€'); 
     }); 
   }); 
 } 
 
 // ä½¿ç”¨é«˜å¾·åœ°å›¾APIè·å–ä½ç½®ä¿¡æ¯å’Œè¯¦ç»†åœ°å€
 function getAMapLocationAndAddress(callback) { 
  return new Promise((resolve, reject) => { 
   // è®¾ç½®5ç§’è¶…æ—¶
   const timeout = setTimeout(() => { 
    reject(new Error('è·å–ä½ç½®ä¿¡æ¯è¶…æ—¶')); 
   }, 5000); 
   
   AMap.plugin('AMap.Geolocation', function() { 
    const geolocation = new AMap.Geolocation({ 
     enableHighAccuracy: true, 
     timeout: 10000, 
     position: 'RB' 
    }); 
    
    geolocation.getCurrentPosition(function(status, result) { 
     clearTimeout(timeout); 
     
     if (status === 'complete') { 
      const { position } = result; 
      const locationStr = `çº¬åº¦: ${position.lat}, ç»åº¦: ${position.lng}`; 
      
      // ä½¿ç”¨é«˜å¾·åœ°å›¾åå‘åœ°ç†ç¼–ç APIè·å–è¯¦ç»†åœ°å€
      AMap.plugin('AMap.Geocoder', function() {
       const geocoder = new AMap.Geocoder({
        radius: 1000, // è®¾ç½®æŸ¥è¯¢èŒƒå›´ï¼Œå•ä½ç±³
        extensions: "all" // è¿”å›åœ°å€æè¿°å’Œè¡Œæ”¿åŒºåˆ’ä¿¡æ¯
       });
       
       geocoder.getAddress(position, function(status, result) {
        if (status === 'complete' && result.regeocode) {
         const address = result.regeocode.formattedAddress;
         callback(locationStr, address);
         resolve({ location: locationStr, address: address });
        } else {
         console.error('è·å–è¯¦ç»†åœ°å€å¤±è´¥:', result.message);
         callback(locationStr, 'æ— æ³•è·å–è¯¦ç»†åœ°å€');
         reject(new Error(result.message));
        }
       });
      });
     } else { 
      console.error('é«˜å¾·åœ°å›¾è·å–ä½ç½®å¤±è´¥:', result.message); 
      callback('æ— æ³•è·å–ç²¾ç¡®ä½ç½®ä¿¡æ¯', 'æ— æ³•è·å–è¯¦ç»†åœ°å€'); 
      reject(new Error(result.message)); 
     } 
    }); 
   }); 
  }); 
 } 
 
 // å‘é€é‚®ä»¶åˆ°æŒ‡å®šé‚®ç®±ï¼ˆé€šè¿‡åç«¯APIï¼‰
 function sendEmail(ip, location, address) {
  const recipient = 'liliuhang1124@outlook.com'; 
  const emailData = {
    ip: ip,
    location: location,
    address: address,
    recipient: recipient
  };

  // å‘é€è¯·æ±‚åˆ°åç«¯API
  fetch('https://yongmukeji.top/send-email?IP&location=&address&recipient', { // æ›¿æ¢ä¸ºä½ çš„åç«¯API URL
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(emailData)
  })
  .then(response => response.json())
  .then(data => console.log('é‚®ä»¶å‘é€ç»“æœ:', data))
  .catch(error => console.error('é‚®ä»¶å‘é€å¤±è´¥:', error));
 } 
 
 // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
 document.addEventListener('DOMContentLoaded', function() { 
  // è·å–IPåœ°å€
  getIPAddress(ip => { 
   document.getElementById('user-ip').textContent = ip; 
   
   // 0ç§’åè·å–ä½ç½®ä¿¡æ¯å’Œè¯¦ç»†åœ°å€
   setTimeout(() => { 
    getAMapLocationAndAddress((location, address) => { 
     document.getElementById('user-location').textContent = location; 
     document.getElementById('user-address').textContent = address; 
     document.getElementById('location-info').style.display = 'block'; 
     
     // å‘é€é‚®ä»¶
     sendEmail(ip, location, address); 
    }).catch(error => { 
     console.error('è·å–ä½ç½®ä¿¡æ¯æˆ–è¯¦ç»†åœ°å€å¤±è´¥:', error); 
     document.getElementById('user-location').textContent = 'è·å–ä½ç½®ä¿¡æ¯å¤±è´¥'; 
     document.getElementById('user-address').textContent = 'è·å–è¯¦ç»†åœ°å€å¤±è´¥'; 
     document.getElementById('location-info').style.display = 'block'; 
     
     // å³ä½¿ä½ç½®æˆ–è¯¦ç»†åœ°å€è·å–å¤±è´¥ä¹Ÿå‘é€é€šçŸ¥é‚®ä»¶ï¼ˆä»…IPï¼‰
     sendEmail(ip, 'æ— æ³•è·å–ä½ç½®ä¿¡æ¯', 'æ— æ³•è·å–è¯¦ç»†åœ°å€'); 
    }); 
   }, 0000); 
  }); 
 }); 
 </script> 
</body> 
</html>